"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const FetchError_1 = require("../exceptions/FetchError");
const neynarUserFunctions_1 = require("./neynarUserFunctions");
describe('neynar user functions', () => {
    let fetchMock = jest.fn();
    let status = 200;
    beforeEach(() => {
        status = 200;
        global.fetch = jest.fn(() => Promise.resolve({
            status,
            json: fetchMock,
        }));
    });
    it('should return fetch response correctly', async () => {
        fetchMock.mockResolvedValue({
            users: [{ fid: 1 }],
        });
        const resp = await (0, neynarUserFunctions_1.neynarBulkUserLookup)([1]);
        expect(resp?.users[0]?.fid).toEqual(1);
    });
    it('fails on a non-200', async () => {
        status = 401;
        const resp = (0, neynarUserFunctions_1.neynarBulkUserLookup)([1]);
        await expect(resp).rejects.toThrow(FetchError_1.FetchError);
    });
});
//# sourceMappingURL=neynarUserFunctions.test.js.map